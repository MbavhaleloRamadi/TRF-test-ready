<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Register as a member - Tshikota Ro Farana Stokvel"
    />
    <meta name="theme-color" content="#1B5E20" />
    <title>Register - Tshikota Ro Farana Stokvel</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/components.css" />

    <style>
      /* Prevent horizontal scroll */
      html,
      body {
        overflow-x: hidden;
        width: 100%;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      /* Registration-specific styles */
      .register-hero {
        background: linear-gradient(
          135deg,
          #1b5e20 0%,
          #2e7d32 50%,
          #388e3c 100%
        );
        color: white;
        padding: 2rem 1rem;
        text-align: center;
      }

      .register-hero-logo {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 3px solid rgba(255, 255, 255, 0.3);
        margin-bottom: 1rem;
      }

      .register-hero h1 {
        font-family: "Playfair Display", serif;
        font-size: 1.75rem;
        margin-bottom: 0.5rem;
      }

      .register-hero p {
        opacity: 0.9;
        font-size: 0.95rem;
      }

      .progress-steps {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 1.5rem;
        padding: 0 1rem;
      }

      .progress-step {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        opacity: 0.6;
      }

      .progress-step.active {
        opacity: 1;
      }

      .progress-step.completed {
        opacity: 0.8;
      }

      .step-number {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.8rem;
      }

      .progress-step.active .step-number {
        background: white;
        color: #1b5e20;
      }

      .progress-step.completed .step-number {
        background: #81c784;
      }

      .step-connector {
        width: 30px;
        height: 2px;
        background: rgba(255, 255, 255, 0.3);
      }

      .register-form {
        padding: 1.5rem;
        max-width: 500px;
        margin: 0 auto;
        width: 100%;
      }

      .form-section {
        margin-bottom: 1.5rem;
      }

      .form-group {
        margin-bottom: 1.25rem;
      }

      .form-input,
      .form-select {
        width: 100%;
        max-width: 100%;
      }

      .form-section-title {
        font-size: 1rem;
        font-weight: 600;
        color: #1b5e20;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e8f5e9;
      }

      .id-info {
        background: #e3f2fd;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        margin-top: 0.5rem;
        font-size: 0.85rem;
        color: #1565c0;
        display: flex;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .id-info svg {
        flex-shrink: 0;
        margin-top: 2px;
      }

      .password-requirements {
        background: #fff8e1;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        margin-top: 0.5rem;
        font-size: 0.8rem;
        color: #f57c00;
      }

      .password-requirements ul {
        margin: 0.5rem 0 0 1rem;
        padding: 0;
      }

      .password-requirements li {
        margin-bottom: 0.25rem;
      }

      .terms-checkbox {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        margin-top: 1.5rem;
        padding: 1rem;
        background: #f5f5f5;
        border-radius: 8px;
      }

      .terms-checkbox input[type="checkbox"] {
        width: 20px;
        height: 20px;
        margin-top: 2px;
        accent-color: #1b5e20;
      }

      .terms-text {
        font-size: 0.9rem;
        color: #555;
        line-height: 1.5;
      }

      .terms-text a {
        color: #1b5e20;
        text-decoration: underline;
      }

      .register-footer {
        text-align: center;
        padding: 1.5rem;
        color: #666;
        font-size: 0.9rem;
        border-top: 1px solid #eee;
        margin-top: 1rem;
      }

      .register-footer a {
        color: #1b5e20;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <!-- Hero Section -->
    <section class="register-hero">
      <img
        src="assets/logo/logo.tshikota.jpeg"
        alt="Tshikota Ro Farana Logo"
        class="register-hero-logo"
        onerror="this.style.display = 'none'"
      />
      <h1>Join Tshikota Ro Farana</h1>
      <p>Register to become a stokvel member</p>

      <!-- Progress Steps -->
      <div class="progress-steps">
        <div class="progress-step active">
          <span class="step-number">1</span>
          <span>Your Details</span>
        </div>
        <div class="step-connector"></div>
        <div class="progress-step">
          <span class="step-number">2</span>
          <span>Next of Kin</span>
        </div>
        <div class="step-connector"></div>
        <div class="progress-step">
          <span class="step-number">✓</span>
          <span>Complete</span>
        </div>
      </div>
    </section>

    <!-- Registration Form -->
    <main class="register-form">
      <form id="registerForm" novalidate>
        <!-- Personal Details Section -->
        <section class="form-section">
          <h2 class="form-section-title">Personal Details</h2>

          <div class="form-group">
            <label for="firstName" class="form-label"
              >First Name(s) <span class="required">*</span></label
            >
            <input
              type="text"
              id="firstName"
              name="firstName"
              class="form-input"
              placeholder="Enter your first name(s)"
              required
              autocomplete="given-name"
            />
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="surname" class="form-label"
              >Surname <span class="required">*</span></label
            >
            <input
              type="text"
              id="surname"
              name="surname"
              class="form-input"
              placeholder="Enter your surname"
              required
              autocomplete="family-name"
            />
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="dateOfBirth" class="form-label"
              >Date of Birth <span class="required">*</span></label
            >
            <input
              type="date"
              id="dateOfBirth"
              name="dateOfBirth"
              class="form-input"
              required
            />
            <span class="form-hint"
              >You must be 18 years or older to register</span
            >
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="idNumber" class="form-label"
              >SA ID Number <span class="required">*</span></label
            >
            <input
              type="text"
              id="idNumber"
              name="idNumber"
              class="form-input"
              placeholder="e.g., 9001015009087"
              required
              maxlength="13"
              inputmode="numeric"
              pattern="[0-9]{13}"
            />
            <div class="id-info">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <path d="M12 16v-4M12 8h.01" />
              </svg>
              <span
                >Your ID number is used for verification and will be kept
                confidential.</span
              >
            </div>
            <span class="form-error"></span>
          </div>
        </section>

        <!-- Contact Details Section -->
        <section class="form-section">
          <h2 class="form-section-title">Contact Details</h2>

          <div class="form-group">
            <label for="phone" class="form-label"
              >Phone Number <span class="required">*</span></label
            >
            <input
              type="tel"
              id="phone"
              name="phone"
              class="form-input"
              placeholder="e.g., 0821234567"
              required
              autocomplete="tel"
              maxlength="10"
              inputmode="numeric"
              pattern="[0-9]{10}"
            />
            <span class="form-hint"
              >10-digit SA mobile number (used for login)</span
            >
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="email" class="form-label"
              >Email Address <span class="optional">(Optional)</span></label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="form-input"
              placeholder="your@email.com"
              autocomplete="email"
            />
            <span class="form-hint">For receiving statements and updates</span>
            <span class="form-error"></span>
          </div>
        </section>

        <!-- Account Security Section -->
        <section class="form-section">
          <h2 class="form-section-title">Create Your Password</h2>

          <div class="form-group">
            <label for="password" class="form-label"
              >Password <span class="required">*</span></label
            >
            <input
              type="password"
              id="password"
              name="password"
              class="form-input"
              placeholder="Create a strong password"
              required
              minlength="6"
              autocomplete="new-password"
            />
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="confirmPassword" class="form-label"
              >Confirm Password <span class="required">*</span></label
            >
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              class="form-input"
              placeholder="Re-enter your password"
              required
              minlength="6"
              autocomplete="new-password"
            />
            <span class="form-error"></span>
          </div>

          <div class="password-requirements">
            <strong>Password must contain:</strong>
            <ul>
              <li>At least 6 characters</li>
              <li>At least one number</li>
              <li>Avoid using your ID or phone number</li>
            </ul>
          </div>
        </section>

        <!-- Terms and Conditions -->
        <div class="terms-checkbox">
          <input type="checkbox" id="acceptTerms" name="acceptTerms" required />
          <label for="acceptTerms" class="terms-text">
            I understand and agree to the stokvel rules:
            <br />• Minimum R300 contribution per month <br />• Payment due by
            the 7th of each month <br />• R50 late fee applies after the 7th
            <br />• R10,000+ savings qualifies for interest share
          </label>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn btn-primary btn-block"
          id="submitBtn"
          style="margin-top: 1.5rem"
        >
          <span class="btn-text">Continue to Next of Kin</span>
          <span class="btn-loading" style="display: none">
            <span class="spinner"></span>
            Registering...
          </span>
        </button>
      </form>

      <!-- Already Registered -->
      <div class="register-footer">
        <p>Already registered? <a href="view-account.html">Log in here</a></p>
      </div>
    </main>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <!-- App Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/database.js"></script>
    <script src="js/sms.js"></script>
    <script src="js/app.js"></script>
    <script src="js/register.js"></script>
  </body>
</html>
